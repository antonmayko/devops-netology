# Домашнее задание к занятию 5. «Оркестрация кластером Docker контейнеров на примере Docker Swarm»


## Задача 1

Дайте письменые ответы на вопросы:

- В чём отличие режимов работы сервисов в Docker Swarm-кластере: replication и global?

Ответ:

Режим `replication` запускает несколько идентичных сервисов на каждой ноде, причём на одной ноде их может быть тоже несколько.

Режим `global` запускает только по одному сервису на каждой ноде.

- Какой алгоритм выбора лидера используется в Docker Swarm-кластере?

Ответ: Используется RAFT алгоритм. Manager ноды опрашивают друг друга и договариваются о лидерстве. Рекомендуется создавать нечетное количество таких нод.

- Что такое Overlay Network?

Ответ: Это внутренняя сеть докера, обеспечивающая связь докер сервисов между собой.
 

## Задача 2

Создайте ваш первый Docker Swarm-кластер в Яндекс Облаке.

![alt-1](https://github.com/antonmayko/devops-netology/blob/main/virt/virt-05-docker-swarm/assets/task2_node_ls.png "task2_node_ls")

## Задача 3

Создайте ваш первый, готовый к боевой эксплуатации кластер мониторинга, состоящий из стека микросервисов.

![alt-1](https://github.com/antonmayko/devops-netology/blob/main/virt/virt-05-docker-swarm/assets/task3_service_ls.png "task3_service_ls")


## Задача 4

![alt-1](https://github.com/antonmayko/devops-netology/blob/main/virt/virt-05-docker-swarm/assets/task4_swarm_update.png "task4_swarm_update")

Логи сворм менеджеров шифруются TLS ключами на диске, по-умолчанию. При перезапуске docker эти ключи распространяются заново среди менеджеров.
Приведенная выше команда генерирует еще один защитный ключ и включает блокировку работы кластера при перезапуске.
И теперь только с помощью него можно разблокировать кластер после перезапуска. Так же он нужен и при добавлении новой ноды.
Это некий аналог мастер-пароля для кластера.


